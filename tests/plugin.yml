sonobuoy-config:
  driver: Job
  plugin-name: karavel-e2e
  result-format: gojson
  source_url: https://raw.githubusercontent.com/karavel-io/platform-e2e/main/tests/plugin.yaml
  description: The Karavel Container Platform E2E test suite
spec:
  command:
    - bash
  args:
    - -c
    - 'go tool test2json ./e2e.test -test.v | tee ${SONOBUOY_RESULTS_DIR}/out.json ; echo ${SONOBUOY_RESULTS_DIR}/out.json > ${SONOBUOY_RESULTS_DIR}/done'
  image: ghcr.io/karavel-io/platform-e2e:main
  env:
    - name: NS_PREFIX
      value: karavel-e2e
    - name: SONOBUOY_PROGRESS_PORT
      value: "8099"
    - name: SONOBUOY_RESULTS_DIR
      value: /tmp/sonobuoy/results
  name: plugin
  resources: {}
  volumeMounts:
    - mountPath: /tmp/sonobuoy/results
      name: results
